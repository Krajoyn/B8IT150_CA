<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <link rel="stylesheet" type="text/css" href="../css/main.css">
  <title>Student Database DBS CA B8IT150</title>
  <script>
  let doIt=()=>{
  let tab=document.getElementById("studentTable");
  let rows=studentTable.getElementsByTagName('tr');
  fetch('https://akdbs.southindia.cloudapp.azure.com:8080/')
  .then(response => response.json())
  .then(data=>{data.Results.forEach(
  x=>{
  let newRow=rows[0].cloneNode(true);
  let divs=newRow.getElementsByTagName('th');
  divs[0].innerHTML=x['ID'];
  divs[1].innerHTML=x['Name'];
  divs[2].innerHTML=x['Email'];
  divs[3].innerHTML=x['DOB'];
  divs[4].innerHTML=x['Course'];
  studentTable.appendChild(newRow);
  }
  );
  studentTable.setAttribute("style","\"\"");
  }
  );
  }
  </script>
</head>

<body>

  <div class="header">
    <img src="../images/university.jpg" alt="university building picture">

    <h1>Welcome to the Staff Portal</h1>
    <p>Here you can view and manage the student database</p>
  </div>

  <div class="content">
    <h1></h1>
    <p>
      Welcome to the staff portal where you can manage your students.
    </p>

    <p>She who arrival end how fertile enabled. Brother she add yet see minuter natural smiling article painted. Themselves at dispatched interested insensible am be prosperous reasonably it. In either so spring wished. Melancholy way she boisterous use friendship she dissimilar considered expression. Sex quick arose mrs lived. Mr things do plenty others an vanity myself waited to. Always parish tastes at as mr father dining at.</p>

    <p>She who arrival end how fertile enabled. Brother she add yet see minuter natural smiling article painted. Themselves at dispatched interested insensible am be prosperous reasonably it. In either so spring wished. Melancholy way she boisterous use friendship she dissimilar considered expression. Sex quick arose mrs lived. Mr things do plenty others an vanity myself waited to. Always parish tastes at as mr father dining at.</p>
  </div>

  <table id='studentTable' style="display: none">
    <caption>Student Database</caption>
    <thead>
      <tr>
        <th>ID</th>
        <th>Name</th>
        <th>Email</th>
        <th>DOB</th>
        <th>Course</th>
      </tr>
    </thead>
<!--     <tbody>
      <tr>
        <td></td>
        <td></td>
        <td></td>
      </tr> 
    </tbody> -->
  </table>

  <BR/>


  <button class="dbButton" onClick="doIt()">Display Student Database</button>
  <br/>
  <br/>

  <div class="button-group">
    <button onClick="addStudent()">Add</button>
    <button onClick="deleteStudent()">Delete</button>
    <button onClick="updateStudent()">Update</button>
  </div>

  <div class="placeholder-group">
    <input placeholder="Enter student ID" type='int' id='Id'>
    <input placeholder="Enter student name" type='text' id='Name'>
    <input placeholder="Enter student email" type='text' id='Email'>
    <input placeholder="Enter student DOB" type='text' id='DOB'>
    <input placeholder="Enter student Course" type='text' id='Course'>
  </div>

  <script>
    let baseURL='https://akdbs.southindia.cloudapp.azure.com:8080/';
    let id=document.querySelector('input');

  // ADD STUDENT
    let addStudent=()=>{
      fetch(baseURL+'add?name='+document.querySelector('#Name').value+'&email='+document.querySelector('#Email').value+'&dob='+document.querySelector('#DOB').value+'&course='+document.querySelector('#Course').value).then(resp=>{alert('Student added')});}

  // DELETE STUDENT
    let deleteStudent=()=>{
    fetch(baseURL+'delete?id='+document.querySelector('#Id').value).then((resp)=>{alert("Student Deleted")});}

  // UPDATE STUDENT
    let updateStudent=()=>{
      fetch(baseURL+'update?id='+document.querySelector('#Id').value+'&name='+document.querySelector('#Name').value+'&email='+document.querySelector('#Email').value+'&dob='+document.querySelector('#DOB').value+'&course='+document.querySelector('#Course').value).then(resp=>{alert('Student Updated')});}
  </script>

</body>

</html>
