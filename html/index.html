<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<link rel="stylesheet" type="text/css" href="main.css">
<title>Test API Client</title>
<script>
let doIt=()=>{
let tab=document.getElementById("tab1");
let rows=tab1.getElementsByTagName('tr');
fetch('https://akdbs.southindia.cloudapp.azure.com:8080/')
.then(response => response.json())
.then(data=>{data.Results.forEach(
x=>{
let newRow=rows[0].cloneNode(true);
let divs=newRow.getElementsByTagName('td');
divs[0].innerHTML=x['ID'];
divs[1].innerHTML=x['Name'];
divs[2].innerHTML=x['Email'];
tab1.appendChild(newRow);
}
);
tab1.setAttribute("style","\"\"");
}
);
}
</script>
</head>

<body>
<button onClick="doIt()">Press me</button>
This is where the results turn up.......: <br/>
<table id='tab1' bgcolor='blue' style="display: none">
<tr><td>ID</td><td>Name</td><td>Email</td></tr>
</table>
<BR/>


<!-- ADD STUDENT BUTTON -->
<input placeholder="Enter name to add" type='int' id='addName'>
<input placeholder="Enter email to add" type='int' id='addEmail'>
<button onClick="addStudent()">Add</button>

<!-- ADD STUDENT  -->
<script>
  let baseURL='https://akdbs.southindia.cloudapp.azure.com:8080/';
  let id=document.querySelector('input');
  let addStudent=()=>{
    fetch(baseURL+'add?name='+document.querySelector('#addName').value+'&email='+document.querySelector('addEmail').value).then(resp=>{alert('Student added')});
    document.querySelector('#addName').value="";
    document.querySelector('#addEmail').value="";}
</script>


<!-- DELETE BUTTON  -->
<input placeholder="Enter ID for deletion" type='int' id='deleteId'>
<button onClick="deleteStudent()">Delete</button>

<!-- DELETE STUDENT -->
<script>
let baseURL='https://akdbs.southindia.cloudapp.azure.com:8080/';
let id=document.querySelector('input');
let deleteStudent=()=>{
  fetch(baseURL+'delete?id='+document.querySelector('#deleteId').value).then((resp)=>{alert("Student Deleted")});}
</script>


<!-- UPDATE BUTTON  -->
<!-- <label for='updateName'>Enter name to update</label> -->
<input placeholder="Enter name for update" type='text' name='updateName' id='updateName'>

<!-- <label for='updateID'>Enter email to update</label> -->
<input placeholder="Enter email for update" type='text' name='updateEmail' id='updateEmail'>

<input placeholder="Enter ID for update" type='int' id='updateId'>
<!-- <button onClick="updateStudent()">Update</button> -->

<button onClick="updateStudent()">Update</button>


<!-- UPDATE STUDENT  -->
<script>
  let baseURL='https://akdbs.southindia.cloudapp.azure.com:8080/';
  let id=document.querySelector('input');
  let updateStudent=()=>{
    fetch(baseURL+'update?id='+document.querySelector('#updateId').value+'&name='+document.querySelector('#updateName').value+'&email='+document.querySelector('#updateEmail').value).then(resp=>{alert('Student Updated')});}
</script>







</body>
</html>
